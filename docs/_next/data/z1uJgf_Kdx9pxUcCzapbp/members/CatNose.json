{"pageProps":{"member":{"name":"CatNose","role":"CTO","bio":"デザインが好きなプログラマー。開発者向けの情報共有プラットフォームzenn.devを開発しています。","avatarSrc":"/team-blog-hub/avatars/catnose.jpg","sources":["https://zenn.dev/catnose99/feed","https://medium.com/feed/@catnose99"],"includeUrlRegex":"medium.com|zenn.dev","twitterUsername":"catnose99","githubUsername":"catnose99","websiteUrl":"https://catnose99.com"},"postItems":[{"title":"Cloudflare PagesにGatsbyJS v3のサイトをとりあえずデプロイする","contentSnippet":"2021年3月に一般提供がはじまったCloudflare Pagesに、同月にリリースされたばかりのGatsbyJS v3.0をデプロイしてみます。 1. Gatsbyのサイトを準備するGatsby CLIを入れておくと開発がしやすいのでグローバルインストールしておきます。                      $ npm install -g gatsby-cli            僕はNode.jsのバージョン管理にnodenvを使っているのでグローバルインストールした後はnodenv rehashを実行します。これでgatsbyコマンドが使えるようにな...","link":"https://zenn.dev/catnose99/articles/dc80bf0495162c","isoDate":"2021-03-04T05:45:41.000Z","dateMiliSeconds":1614836741000,"authorName":"CatNose"},{"title":"【GCP】Cloud Storageでファイルは公開 & 一覧ページは非公開にする権限設定","contentSnippet":"GCPのCloud Storageの権限設定について、意外と知られていなさそうなハマりポイントがあるので書き残しておきます。投稿機能があるサービスなどで、ユーザーがアップロードしたファイルをCloud Storageに以下のような形で保管したいとします。ファイル自体は公開する（誰でもアクセスできる）ファイルの一覧ページは非公開にするこのような場合、バケットの権限設定でロールを［ストレージのレガシー オブジェクト読み取り］にする必要があります。 「Storageオブジェクト閲覧者」だとファイルの一覧まで公開されてしまうGCPのIAMにおいて、「誰でも○」を実現するには、メ...","link":"https://zenn.dev/catnose99/articles/18720e3af36d22","isoDate":"2021-03-02T05:28:57.000Z","dateMiliSeconds":1614662937000,"authorName":"CatNose"},{"title":"Zennで発生した障害の原因と行なった対策のまとめ","contentSnippet":"2021/02/24の11時頃〜1時間ほどzenn.devにアクセスしづらい・アクセスできない問題が発生していました。その後も3時間ほど一部のページへのアクセスができない状況となっていました。Zennに投稿してくれた方、見に来てくれた方、ご迷惑をおかけしてすみませんでした。今回の障害は学びが多かったので、個人の記事として残しておくことにします。 原因今回の障害は、使用しているクラウドサービスではなく、Zenn自体に原因がありました。 1. KaTeX記法により生成されるHTMLが思った以上に大きかったZennのマークダウンエディターではKaTeX記法をサポートしています。例...","link":"https://zenn.dev/catnose99/articles/b1735af8aa0b02","isoDate":"2021-02-25T09:21:09.000Z","dateMiliSeconds":1614244869000,"authorName":"CatNose"},{"title":"CloudBuildでSecret Managerの機密データを取得して変数として使用する","contentSnippet":"先日GCPのCloudBuild + KMSで機密ファイルを暗号化して管理するという記事を書きました。今回はKMSの代わりにSecret Manager（シークレット・マネージャー）というGCPサービスで機密データを管理し、Google CloudBuildの中でデータを使用する方法をまとめておきます。 KMSとSecret Managerの使い分け（個人的意見）トークンやパスワードなどの単純な文字列の管理であれば、KMSよりもSecret Managerを使った方が暗号化の手間がなく、バージョン管理もできて安全かつ楽だと思います。一方で何らかの機密データを含むファイルをローカ...","link":"https://zenn.dev/catnose99/articles/6cb0fc434a4a62","isoDate":"2021-02-23T02:23:21.000Z","dateMiliSeconds":1614047001000,"authorName":"CatNose"},{"title":"【Chrome】textareaの改行時にカーソル位置がガタっとずれる問題の対処法","contentSnippet":"めちゃくちゃ苦しんだ結果、CSSを1行書き足すだけで解決しました。              結論        textarea { overflow-anchor: none; }             Enterキーを押すとtextareaのスクロール位置がずれる問題ふとZennのスクラップのエディターで、Enterキーを押すと、カーソルのあたっている部分のスクロール位置がガタっとずれる問題が発生することに気づきました。Enterキーを押したタイミングでカーソルの位置がviewportの先頭もしくは末尾にジャンプするようなイメージです。もう少し調べてみる...","link":"https://zenn.dev/catnose99/articles/e0d42812c7588c","isoDate":"2021-02-20T08:02:16.000Z","dateMiliSeconds":1613808136000,"authorName":"CatNose"},{"title":"【Google Sheets API v4】シートの書き込みで「Permisson Denied」が発生したときにチェックするポイント","contentSnippet":"TL;DRGoogle Sheets API や Google Docs API で書き込みを行う場合は［共有］設定でサービスアカウントのメールアドレスを登録する。 Google Sheets API で書き込み時にエラーが発生Google Sheets API v4 を用いてスプレッドシートに書き込みを行おうとしたら、以下のようなエラーが発生しました。              レスポンス        {  // ...略...  code: \"403\",  message: \"The caller does not have permission\",  ...","link":"https://zenn.dev/catnose99/articles/d9b831b850ca3a","isoDate":"2021-02-18T02:59:45.000Z","dateMiliSeconds":1613617185000,"authorName":"CatNose"},{"title":"【GCP IAM】少人数チームでメンバーの権限を管理する","contentSnippet":"GCPを使った少人数のプロジェクトで、開発メンバーごとにサービスへのアクセス権限を管理するIAM設定についてまとめておきます。「少人数のプロジェクト」と絞ったのはGCP Cloud IAMのドキュメントを読むと設定のパターンが色々とあって混乱しやすいと感じたからです。「とりあえず小さく共同開発をはじめる」というケースに絞って紹介します。合わせて公式ドキュメントのIAM の安全な使用も読んでおくことをおすすめします。より良い方法をご存知の方はコメントで指摘していただけるとありがたいです。 GCPのIAMの考え方GCPのIAMについてまず知っておきたい3つの要素があります。...","link":"https://zenn.dev/catnose99/articles/a128e22a3e4467","isoDate":"2021-02-17T06:33:47.000Z","dateMiliSeconds":1613543627000,"authorName":"CatNose"},{"title":"GCPのCloudBuild + KMSで機密ファイルを暗号化して管理する","contentSnippet":"ZennではAPIサーバーを動かすためにGCPを使っています。具体的にはCI/CDサービスのCloudBuildからAppEngineデプロイするようにしています。その中で少しややこしいのが機密データを含むファイルの管理です。GCPのプロジェクトの場合にはCloud Key Management System（KMS）というものを合わせて使うとCloudBuildのステップの中で暗号化したファイルを復元できます。この記事ではKMSの使い方を紹介しますが、GCPでの機密データの管理にはSecret Managerも使用できます（Secret ManagerとCloud KMSの使い...","link":"https://zenn.dev/catnose99/articles/8303b8a195afee","isoDate":"2021-02-15T04:47:02.000Z","dateMiliSeconds":1613364422000,"authorName":"CatNose"},{"title":"Next.js + CSS ModulesでFOUC（CSSの適用遅れによるちらつき）が発生したときの暫定対策","contentSnippet":"Next.js v10.0.6時点の情報です。最新の情報はこちらのIssueを追うのが良さそうです。 https://github.com/vercel/next.js/issues/18769Next.jsに根本的な原因があるかどうかはまだ確認できていません 発生していた問題https://twitter.com/Meijin_garden/status/1356172726856126465はじめて https://zenn.dev を読み込んだときに、一瞬スタイルがあたっていない状態で表示されてしまう問題が発生していました。いわゆるFOUC（Flash of ...","link":"https://zenn.dev/catnose99/articles/3c106c81cbfdec","isoDate":"2021-02-09T08:44:00.000Z","dateMiliSeconds":1612860240000,"authorName":"CatNose"},{"title":"M1 Macでエラー「fatal error: 'vips/vips8' file not found...」が発生したときの対処法","contentSnippet":"M1 MacでNode.jsを導入したうえで、Next.js（正確にはNext.jsに依存しているzenn-cli）をインストールしたところ以下のようなエラーが発生しました。                      $ yarn install...> sharp@0.26.3 install /Users/foo/node_modules/sharp> (node install/libvips && node install/dll-copy && prebuild-install) || (node-gyp rebuild...","link":"https://zenn.dev/catnose99/articles/b4a8ab24a2200b","isoDate":"2021-02-09T02:55:11.000Z","dateMiliSeconds":1612839311000,"authorName":"CatNose"},{"title":"npmのoptionalDependenciesとは","contentSnippet":"ググってもあまり日本語の記事がヒットしないので簡単に説明を載せておきます。まれにpackage.jsonでoptionalDependenciesというものにパッケージ名が指定されていることがあります。                        \"dependencies\": {    ...  },  \"devDependencies\": {    ...  }  \"optionalDependencies\": {    \"sharp\": \"0.26.3\"  }             optionalDependenciesとはoptional...","link":"https://zenn.dev/catnose99/articles/7dfcd5b3e5b141","isoDate":"2021-02-08T14:20:51.000Z","dateMiliSeconds":1612794051000,"authorName":"CatNose"},{"title":"Cloudflare Workers + Node.jsでマークダウン変換APIを動かす","contentSnippet":"Cloudflare WorkersでNode.jsを動かしてみたので、その手順を整理してまとめておきます（元のスクラップ）。例として、Node.js + markedでHTMLをマークダウンへと変換するAPIをCloudflare Workersにデプロイしてみます。関連記事https://zenn.dev/catnose99/articles/d1d16e11e7c6d0事前準備Cloudflareのアカウントを作成しておきましょう。 WranglerをインストールするCloudflare Workersで関数のビルド・プレビュー・デプロイをするときにはWrangler...","link":"https://zenn.dev/catnose99/articles/f86d74cc5abc37","isoDate":"2021-02-07T07:21:56.000Z","dateMiliSeconds":1612682516000,"authorName":"CatNose"},{"title":"Cloudflare Workers を使う前に知っておきたい注意点","contentSnippet":"Cloudflare WorkersでNode.jsを動かすためのあれこれをスクラップに残していたのですが、ハマったポイントが多かったのでこちらに整理しておきます。https://zenn.dev/catnose99/scraps/cd0417a86a6d00今回やろうとしたのは、Zennのマークダウン→HTML変換のAPIをCloudflare Workersで動かすというものです。試行錯誤の末に断念したのですが、以下でその理由をまとめておきます。 CPUやメモリ、ファイルサイズなどの制限が厳しめ2021/02/06時点でのCloudflare Workersの制限一覧がこち...","link":"https://zenn.dev/catnose99/articles/d1d16e11e7c6d0","isoDate":"2021-02-07T04:52:17.000Z","dateMiliSeconds":1612673537000,"authorName":"CatNose"},{"title":"nodenvでglobalパッケージをuninstallできなくなったときの対処法（shimsを削除）","contentSnippet":"問題の背景M1 Macの環境構築でyarnを入れようとした「Homebrewがyarnに未対応だからnpm install -g yarnでインストールする」という記事を読んで、そのとおりにしたnpmはnodenvで管理あとからHomebrew（brew install yarn）を試したら普通に動くっぽいnpmでグローバルインストールしたyarnを削除することに npmでグローバルインストールしたyarnが消えないまず以下を試した。                      $ npm uninstall -g yarn# => up to...","link":"https://zenn.dev/catnose99/articles/9356979accca26","isoDate":"2021-02-05T06:54:30.000Z","dateMiliSeconds":1612508070000,"authorName":"CatNose"},{"title":"NestJSでdotenvを使う","contentSnippet":"NestJSのドキュメントに書かれてる。 1. @nestjs/configをインストール                      $ yarn add @nestjs/config             2. app.module.tsでConfigModuleを読み込む                      import { Module } from '@nestjs/common';import { ConfigModule } from '@nestjs/config';@Module({  imports: [ConfigModu...","link":"https://zenn.dev/catnose99/articles/nestjs-tips-dotenv","isoDate":"2021-02-02T06:10:02.000Z","dateMiliSeconds":1612246202000,"authorName":"CatNose"},{"title":"デザイナーはコードが書けると楽しい","link":"https://medium.com/@catnose99/%E3%83%87%E3%82%B6%E3%82%A4%E3%83%8A%E3%83%BC%E3%81%AF%E3%82%B3%E3%83%BC%E3%83%89%E3%81%8C%E6%9B%B8%E3%81%91%E3%82%8B%E3%81%A8%E6%A5%BD%E3%81%97%E3%81%84-541bb33eca1b?source=rss-d477716edf57------2","isoDate":"2020-10-21T14:37:30.000Z","dateMiliSeconds":1603291050000,"authorName":"CatNose"},{"title":"Mediumのロゴが変わった件","link":"https://medium.com/@catnose99/medium%E3%81%AE%E3%83%AD%E3%82%B4%E3%81%8C%E5%A4%89%E3%82%8F%E3%81%A3%E3%81%9F%E4%BB%B6-a61f1c475a2f?source=rss-d477716edf57------2","isoDate":"2020-10-21T14:32:36.000Z","dateMiliSeconds":1603290756000,"authorName":"CatNose"}]},"__N_SSG":true}